version: 2

sources:
  - name: greenhouse 
    database: "{{ var ('greenhouse_database', target.database) }}"
    schema: "{{ var ('greenhouse_schema', 'greenhouse') }}"

    loader: fivetran
    loaded_at_field: _fivetran_synced
      
    freshness:
      warn_after: {count: 72, period: hour}
      error_after: {count: 96, period: hour}

    tables:
      - name: activity
        description: Table capturing lists of activities on a candidateâ€™s profile, including interviews, notes, and emails.
        colunns:
          - name: body
            description: Content of the activity taken. 
          - name: candidate_id
            description: Foreign key referencing the CANDIDATE whose profile was acted upon. 
          - name: created_at
            description: Timestamp of when the activity occurred.
          - name: id
            description: The internal Greenhouse ID of the activity feed note.
          - name: subject
            description: Subject of the activity.
          - name: user_id
            description: Foreign key referencing the USER who performed the activity. 

      - name: application
        description: Table capturing all applications (candidates + prospects).
        columns:
          - name: _fivetran_deleted
            description: Boolean that is true if the application has been soft-deleted from Greenhouse.
          - name: applied_at
            description: Timestamp of when the application was submitted. 
          - name: candidate_id
            description: Foreign key referencing the CANDIDATE who submitted the application.
          - name: credited_to_user_id
            description: Foreign key referencing the USER who will receive credit for this application.
          - name: current_stage_id
            description: Foreign key referencing the JOB_STAGE that the application is currently at in the pipeline. 
          - name: id
            description: Unique ID of the application.
          - name: is_deleted
          - name: last_activity_at
            description: Timestamp of when the last activity was taken on this application. 
          - name: location_address
            description: The content of the address question on a job post.
          - name: prospect
            description: >
              Boolean that is true if this is a prospect application, which means that the associated person 
              is a prospect and has not yet applied for this job.
          - name: prospect_owner_id
          - name: prospect_pool_id
          - name: prospect_stage_id
          - name: rejected_at
          - name: rejected_reason_id
          - name: source_id
          - name: status
   
      - name: application_qna
      - name: application_history
      - name: attachment
      - name: candidate
      - name: candidate_tag
      - name: close_reason
      - name: department
      - name: eeoc
      - name: email_address
      - name: hiring_team
      - name: interview
      - name: job
      - name: job_application
      - name: job_department 
      - name: job_office
      - name: job_opening
      - name: job_post 
      - name: job_stage
      - name: office
      - name: phone_number
      - name: scheduled_interview
      - name: scheduled_interviewer
      - name: scorecard
      - name: scorecard_attribute
      - name: social_media_address
      - name: source
      - name: tag
      - name: user
      - name: user_email
      - name: website_address
      - name: prospect_pool
      - name: prospect_stage
         